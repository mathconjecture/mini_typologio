%\documentclass[11pt]{report}

\usepackage{etex}
\usepackage{etoolbox}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Babel language package
%\usepackage[english,greek]{babel}
% Inputenc font encoding
%\usepackage[utf8]{inputenc}


% \usepackage{xltxtra} 
% \usepackage{xgreek} 
% \setmainfont[Mapping=tex-text]{GFS Didot} 

%\usepackage{kmath,kerkis} % The order of the packages matters; kmath changes the default text font
%\usepackage[T1]{fontenc}
% \usepackage{ifxetex}
% \ifxetex
    % IF XELATEX

% MINION new font
\usepackage{fontspec}
\usepackage{libertine}
% \usepackage{mathspec}

\setmainfont[Extension=.ttf,UprightFont=*-Regular,BoldFont=*-Bold,ItalicFont=*-Italic,BoldItalicFont=*-Bold-Italic]{Minion-Pro}
\setsansfont[Extension=.ttf,UprightFont=*H,BoldFont=*HB,ItalicFont=*HI,BoldItalicFont=*HBI]{Vera}


% % MINION new font
% \usepackage[T1]{fontenc}
% \usepackage[utf8]{inputenc}
% \usepackage[english,greek]{babel}
% \usepackage{alphabeta}
% \usepackage{libertinus}
% \usepackage{libertinust1math}
% % \usepackage{mathspec}

% \setmainfont[Extension=.ttf,UprightFont=*-Regular,BoldFont=*-Bold,ItalicFont=*-Italic,BoldItalicFont=*-Bold-Italic]{Minion-Pro}
% \setsansfont[Extension=.ttf,UprightFont=*H,BoldFont=*HB,ItalicFont=*HI,BoldItalicFont=*HBI]{Vera}


%%\usepackage{unicode-math}
%%\setmathfont{Minion-Pro-Regular.ttf}
%%\setmathfont[range=\mathup]{Minion-Pro-Regular.ttf}
%%\setmathfont[range=\mathit]{Minion-Pro-Italic.ttf}
%%\setmathfont[range=\mathbf]{Minion-Pro-Bold.ttf}
%%\setmathfont[range={0222B}]{Minion-Pro-Italic.ttf}
%%\setmathfontface\mathfoo{Minion-Pro-Regular.ttf}
%%\setoperatorfont\mathfoo
%    \usepackage{polyglossia}
%    \setdefaultlanguage{greek}
%    \setotherlanguage{english}
%    % \RequirePackage{unicode-math}
%    % \setmathfont{Latin Modern Math}
%    % \newcommand{\smblkcircle}{•}
%\else
%    % IF PDFLATEX
%    %\usepackage{tgheros}
%    %\renewcommand*\familydefault{\sfdefault}
%    %\usepackage[eulergreek]{sansmath}
%    %\sansmath
%    \usepackage[T1]{fontenc}
%    \usepackage[utf8]{inputenc}
%    \usepackage[english,greek]{babel}
%\fi


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[table,RGB]{xcolor}

\usepackage{geometry}
\geometry{a4paper,top=5mm,bottom=10mm,left=5mm,right=5mm,footskip=5pt}
\setlength{\parindent}{0pt}

%\usepackage{extsizes}
\usepackage{multicol}

%%%%% math packages %%%%%%%%%%%%%%%%%%
% \usepackage[intlimits]{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{proof}
\usepackage{mathtools}
\usepackage{extarrows}

\usepackage[italicdiff]{physics}
\usepackage{siunitx}
\usepackage{xfrac}

%%%%%%% symbols packages %%%%%%%%%%%%%%
\usepackage{bm} %for use \bm instead \boldsymbol in math mode
\usepackage{dsfont}
%\usepackage{stmaryrd}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%% graphics %%%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx}
%\usepackage{color}
%\usepackage{xypic}
%\usepackage[all]{xy}
%\usepackage{calc}

%%%%%% tables %%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{array}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{minibox}
\usepackage{systeme}
\usepackage{empheq}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{enumitem}


\usepackage{fancyhdr}
%%%%% header and footer rule %%%%%%%%%
\setlength{\headheight}{14pt}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.5pt}
\fancypagestyle{plain}{\fancyhf{}
  \fancyhead{}
  \lfoot{\small \vspace{3pt}\color{Col1} Ευάγγελος Σαπουνάκης}
  \cfoot{\small \vspace{3pt}\color{Col2!75} Φοιτητικό Πρόσημο}
  \rfoot{\small \vspace{3pt} \thepage}
}
\fancypagestyle{vangelis}{\fancyhf{}
  \lfoot{\small \vspace{3pt}\color{Col1} Ευάγγελος Σαπουνάκης}
  \cfoot{\small \vspace{3pt}\color{Col2!75} Φοιτητικό Πρόσημο}
  \rfoot{\small \vspace{3pt} \thepage}
}
\fancypagestyle{askhseis}{\fancyhf{}
  \lfoot{\small \vspace{3pt}\color{Col1} Φοιτητικό Πρόσημο}
  \cfoot{\small \vspace{3pt}\color{Col2!75} }
  \rfoot{\small \vspace{3pt} \thepage}
}


%\usepackage{fancyhdr}
%%%%%% header and footer rule %%%%%%%%%
%%\setlength{\headheight}{14pt}
%\renewcommand{\headrulewidth}{0pt}
%\renewcommand{\footrulewidth}{0pt}
%\fancypagestyle{plain}{\fancyhf{}\rfoot{}\rhead{}}
%\fancypagestyle{vangelis}{\fancyhf{}
%    \fancyfootoffset[LE,RO]{}
%    \rfoot[]{\thepage}
%    \lfoot[\thepage]{}
%    \rhead[]{}
%    %\rhead[]{\tikz[remember picture,overlay]{\node[rotate=90,anchor=east] (text) at ([shift={(-5mm,-8mm)}]current page.north east) {\textcolor{Col\thechapter}{\small\strut\leftmark}};
%    %\fill[Col\thechapter] ([xshift={-2.5mm}]text.east) rectangle++(5mm,5mm);
%    %}}
%    % \lhead[\textcolor{Col\thechapter}{\leftmark}]{}
%}


\usepackage{hyperref}
\usepackage{url}
%%%%%%% hyperref settings %%%%%%%%%%%%
\hypersetup{pdfpagemode=UseOutlines,hidelinks,
  colorlinks=true,
  % linkcolor=Col1,
  % anchorcolor=Col1 ,
  % citecolor=Col1 ,
  % urlcolor= ,
  allcolors=Col1,
  bookmarksopen=true,
  pdfdisplaydoctitle=true,
  pdfstartview=Fit,
  unicode=true,
  pdfpagelayout=OneColumn,
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[space]{grffile}
\usepackage{relsize}

% \definecolor{Col1}{HTML}{eb3b79}
% \definecolor{Col2}{HTML}{9a529f}
% \definecolor{Col3}{HTML}{775ba6}
% \definecolor{Col4}{HTML}{5a68b0}
% \definecolor{Col5}{HTML}{55a0d8}
% \definecolor{Col6}{HTML}{34b0e5}
% \definecolor{Col7}{HTML}{34c1d7}
% \definecolor{Col8}{HTML}{65bc6a}
% \definecolor{Col9}{HTML}{9acb62}
% \definecolor{Col10}{HTML}{d1dd5b}
% \definecolor{Col11}{HTML}{f9ec5d}
% \definecolor{Col12}{HTML}{fbc82a}
% \definecolor{Col13}{HTML}{faa725}
% \definecolor{Col14}{HTML}{f26f47}
% \definecolor{Col15}{HTML}{8e6d65}
% \definecolor{Col16}{HTML}{bdbcbc}
% \definecolor{Col17}{HTML}{79919d}


\definecolor{Col0}{HTML}{eb3b79}
\definecolor{Col1}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col2}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col3}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col4}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col5}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col6}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col7}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col8}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col9}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col10}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col11}{rgb}{0.74, 0.2, 0.64}
\definecolor{Col12}{rgb}{0.0, 0.55, 0.55}
\definecolor{Col13}{rgb}{0.74, 0.2, 0.64}

\everymath{\displaystyle}

\usepackage[many]{tcolorbox}

\usepackage[explicit]{titlesec}
%%%%%% titlesec settings %%%%%%%%%%%%%
% \titleformat{ command }[ shape ]{ format }{ label }{ sep }{ before-code }[ after-code 
% \titlespacing*{ command }{ left }{ before-sep }{ after-sep }[ right-sep ]
% Chapter


% \titleformat{\chapter}[block]{\huge\bfseries}{\begin{tcolorbox}[colback=Col\thechapter,left=3pt,right=3pt,top=18pt,bottom=18pt,sharp
% corners,boxrule=0pt]\centering\huge\bfseries\textcolor{white}{#1}\end{tcolorbox}}{0pt}{\markboth{#1}}[\clearpage]
% \titlespacing*{\chapter}{0cm}{6\baselineskip}{0\baselineskip}[0ex]

% Chapter
\titleformat{\chapter}[hang]
{\large\bfseries\centering}
{\begin{tcolorbox}[colback=Col\thechapter,left=1pt,right=1pt,top=1pt,bottom=1pt,sharp
corners,boxrule=0pt]\centering\strut\textcolor{white}{#1}\end{tcolorbox}}
{0ex}{}[]
\titlespacing*{\chapter}{0cm}{0ex}{0ex}[0ex]

% Section
\titleformat{\section}[hang]
{\bfseries\centering}
{\begin{tcolorbox}[colback=Col\thechapter!75,left=1pt,right=1pt,top=1pt,bottom=1pt,sharp
corners,boxrule=0pt]\centering\strut\textcolor{white}{#1}\end{tcolorbox}}
{0ex}{}[]
\titlespacing*{\section}{0cm}{0ex}{0ex}[0ex]

% subsection
\titleformat{\subsection}[hang]
{\normalsize\bfseries\centering}
{\begin{tcolorbox}[colback=Col\thechapter!50!white,left=1pt,right=1pt,top=1pt,bottom=1pt,sharp corners,boxrule=0pt]\centering\strut\textcolor{white}{#1}\end{tcolorbox}}
{0ex}{}[]
\titlespacing*{\subsection}{0cm}{0ex}{0ex}[0ex] 

% % Subsubsection
% \titleformat{\subsubsection}[hang]{\normalsize\bfseries\centering}{}{0ex}{\color{Col\thechapter!55}{#1}}{}
% \titlespacing*{\subsubsection}{0cm}{\baselineskip}{\baselineskip}[0ex]

%% Subsection
%\titleformat{\subsection}[hang]{\large\bfseries\centering}{\tcbox[colback=Col\thechapter!50!white,left=1pt,right=1pt,top=1pt,bottom=1pt,sharp corners]{#1}}{0ex}{}
%\titlespacing*{\subsection}{0cm}{2\baselineskip}{\baselineskip}[0ex]
%% Subsubsection
%\titleformat{\subsubsection}[hang]{\normalsize\bfseries\centering}{}{0ex}{\color{Col\thechapter}{#1}}{}
%\titlespacing*{\subsubsection}{0cm}{\baselineskip}{\baselineskip}[0ex]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




% \AtBeginDocument{\pagestyle{vangelis}\normalsize\raggedright}

\newcommand{\twocolumnside}[2]{\begin{minipage}[t]{0.45\linewidth}\raggedright
    #1
    \end{minipage}\hfill{\color{Col\thechapter}{\vrule width 1pt}}\hfill\begin{minipage}[t]{0.45\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsides}[2]{\begin{minipage}[t]{0.45\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.45\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsidesc}[2]{\begin{minipage}{0.45\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[c]{0.45\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsidesp}[2]{\begin{minipage}[t]{0.40\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.55\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsidesl}[2]{\begin{minipage}[t]{0.50\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.40\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsidesll}[2]{\begin{minipage}[t]{0.55\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.40\linewidth}\raggedright
    #2
  \end{minipage}
}

\newcommand{\twocolumnsidec}[2]{\begin{minipage}[t]{0.50\linewidth}\centering
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.40\linewidth}\centering
    #2
  \end{minipage}
}

\newcommand{\threecolumnside}[3]{\begin{minipage}[t]{0.30\linewidth}\centering
    #1
    \end{minipage}\hfill\begin{minipage}[t]{0.30\linewidth}\centering
    #2
    \end{minipage}\hfill\begin{minipage}[t]{0.30\linewidth}\centering
    #3
  \end{minipage}
}

\newcommand{\fourcolumnsides}[4]{\begin{minipage}[c]{0.22\linewidth}\raggedright
    #1
    \end{minipage}\hfill\begin{minipage}[c]{0.22\linewidth}\raggedright
    #2
    \end{minipage}\hfill\begin{minipage}[c]{0.22\linewidth}\raggedright
    #3
    \end{minipage}\hfill\begin{minipage}[c]{0.22\linewidth}\raggedright
    #4
  \end{minipage}
}


\usepackage{calc}
\usepackage{array}
\definecolor{TabLine}{RGB}{254,254,254}
\newcommand{\TabRowHead}{\rowcolor{TabHeadRow}}
\newcommand{\TabRowHeadCor}{\cellcolor{white}}
\newcommand{\TabRowHCol}{\color{white}\bfseries\boldmath}
\newcommand{\TabCellHead}{\cellcolor{TabHeadRow}\TabRowHCol}
\newenvironment{Mytable}%
{\begingroup\setlength{\arrayrulewidth}{2pt}\arrayrulecolor{TabLine}
  \colorlet{TabHeadRow}{Col\thechapter}
  \colorlet{TabRowOdd}{Col\thechapter!50!white}
  \colorlet{TabRowEven}{Col\thechapter!25!white}
  \rowcolors{1}{TabRowOdd}{TabRowEven}
}%
{\endgroup

}

%%chapter starts on same page for report and book class with etoolbox package

\makeatletter
\patchcmd{\chapter}{\if@openright\cleardoublepage\else\clearpage\fi}{}{}{}
\makeatother


%%%%%%%%%%%%%Watermark%%%%%%%%%%%%%%%%%%
% \usepackage[printwatermark]{xwatermark} 
% \newwatermark[allpages,color=Col2!10,angle=45,scale=4,xpos=0,ypos=0]{ΠΡΟΣΗΜΟ}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%% WATERMARK above pictures with opacity %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[printwatermark]{xwatermark}
\newsavebox\mybox
\savebox\mybox{\tikz[color=Col2,opacity=0.2]\node{ΠΡΟΣΗΜΟ};}
\newwatermark*[
allpages,
fontfamily=lmr,
fontseries=m,
angle=45,
scale=13,
xpos=-45,
ypos=40
]{\usebox\mybox} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%% WATERMARK above pictures with opacity %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \usepackage[printwatermark]{xwatermark}
% \newsavebox\mybox
% \savebox\mybox{\tikz[color=Col2,opacity=0.2]\node{ΠΡΟΣΗΜΟ};}
% \newwatermark*[
%   allpages,
%   fontfamily=lmr,
%   fontseries=m,
%   angle=45,
%   scale=12,
%   xpos=-40,
%   ypos=40,
% ]{\usebox\mybox} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
